# 巡店监控审核系统

一个用于审核巡店专员工作质量的Web应用系统，通过查看监控录像（海康云眸）记录巡店情况，支持结构化数据填写和统计分析。

## 功能特点

### 核心功能
- **巡店记录管理**：创建、查看巡店记录，记录到离店时间、监控查看时段等
- **结构化评估**：按类别（店面形象、人员管理、商品管理、营运规范）进行评分
- **问题记录**：记录巡店中发现的问题，标注严重程度
- **数据统计**：巡店次数、平均时长、评价分布等多维度统计
- **Excel导出**：支持导出巡店记录为Excel格式

### 技术架构
- 前端：React + Ant Design + Recharts
- 后端：Node.js + Express + SQLite
- 数据库：SQLite（轻量级，无需额外安装）

## 安装运行

### 1. 安装依赖
```bash
# 安装后端依赖
npm install

# 安装前端依赖
cd client
npm install
cd ..
```

### 2. 初始化数据
```bash
# 启动服务器（会自动创建数据库表）
npm start

# 在另一个终端运行数据初始化（可选，导入示例数据）
node init-data.js
```

### 3. 启动应用
```bash
# 方式一：同时启动前后端（推荐）
npm start  # 启动后端（端口3001）
# 新开终端
cd client
npm start  # 启动前端（端口3000）

# 方式二：生产环境部署
cd client
npm run build  # 构建前端
cd ..
npm start  # 启动服务器，访问 http://localhost:3001
```

## 使用说明

### 1. 基础数据管理
- **门店管理**：添加需要巡检的门店信息
- **巡店员管理**：添加巡店专员信息

### 2. 创建巡店记录
1. 选择门店和巡店员
2. 填写巡店时间信息
3. 填写监控查看时段（与海康云眸对应）
4. 逐项评估检查项目
5. 记录发现的问题
6. 给出总体评价

### 3. 数据查询与分析
- 支持按日期、门店、巡店员筛选记录
- 查看巡店详情
- 导出Excel报表
- 查看统计图表

## 数据结构

### 巡店记录主要字段
- 基本信息：门店、巡店员、日期、时段
- 时间记录：到店时间、离店时间、巡店时长
- 监控信息：监控查看时段
- 检查项目：各类别评分和备注
- 问题记录：问题类型、描述、严重程度
- 总体评价：优秀/良好/合格/需改进/不合格

### 检查类别
1. **店面形象**：门头清洁、橱窗展示、店内卫生、货架整洁
2. **人员管理**：员工仪容、服务态度、专业知识、人员到岗
3. **商品管理**：商品陈列、价签准确、库存充足、促销执行
4. **营运规范**：收银规范、安全管理、设备运行、证照齐全

## 与海康云眸集成

系统预留了监控查看时段字段，可记录在海康云眸中查看的具体时间段。后续可通过以下方式深度集成：

1. **API集成**：调用海康云眸API获取录像片段
2. **时间同步**：自动匹配巡店时间与监控时间
3. **截图存储**：保存关键监控截图作为证据

## 扩展建议

1. **移动端支持**：开发移动端应用，支持现场填写
2. **权限管理**：添加用户角色和权限控制
3. **自动评分**：基于历史数据建立评分模型
4. **预警机制**：问题门店自动预警通知
5. **AI辅助**：接入图像识别，自动识别问题

## 注意事项

- 数据库文件存储在 `database/inspection.db`
- 导出的Excel文件临时存储在 `exports/` 目录
- 前端开发模式下API请求会自动代理到后端

## 技术支持

如有问题或需要定制开发，请联系技术支持团队。
# store-inspection-system
# 触发Railway部署
# 强制触发Railway部署 2025年 8月29日 星期五 15时07分29秒 CST
